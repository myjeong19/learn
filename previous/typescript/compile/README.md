# 컴파일

## 관찰 모드

- 관찰 모드를 사용하면 자동으로 변경 사항을 컴파일 할 수 있다.  
   `tsc filename.ts -w`

  - 하지만, 여전히 파일을 구체적으로 타겟팅 해야한다는 단점이있다.

- 파일을 가르키지 않고 `tsc`만 입력하는 경우 전체 프로젝트 폴더를 감시하게 된다.
  이렇게 해도 되지만 `tsc --init`을 사용하는 방법도 있다.

- `tsc --init`은 타입스크립트에게 이 명령을 실행하는 폴더에 있는 모든 것을 실행시키라고 전달한다.  
  이 명령을 사용하면 tsconfig.json 파일이 만들어진다.

  - 이때 `tsc` 명령어를 사용하면 타입스크립트는 모든 타입스크립트 파일을 컴파일하며 감시 모드와 결합할 수도 있다.
    - `tsc -w`

## 파일 포함 및 제외하기

- tsconfig.json은 타입스크립트에게 파일들을 컴파일하는 방법을 알려주는 프로젝트를 관리하는데 매우 중요한 파일이다.

- exclude는 배열에 컴파일을 제외할 파일을 설정할 수 있다.

      ```json
      "exclude": ["node_modules"]
      ```

      - exclude 옵션을 지정하지 않으면 node_modules은 자동으로 제외된다.
      - `"**/*.dev.ts"` 는 설정한 패턴을 제외한 파일이 어느 폴더에 있던 컴파일에서 제외한다.

- include는 컴파일 프로세스에 포함할 파일을 타입스크립트에 구체적으로 지정할 수 있다.

  - exclude와 include를 함께 설정하면 include를 필터링한다.

- files는 include와 비슷하지만, 파일만 지정할 수 있다는 점이 다르다.

  ```ts
  "files": [
     app.ts
  ]

  ```

## `compilerOptions`을 통해 타입스크립트 코드를 컴파일하는 방법을 제어할 수 있다

- `"target": "es2016"`은 어떤 자바스크립트 특정 버전으로 컴파일을 설정할 수 있다.  
  이 점은 타입스크립트로도, 구형 브라우저에서 작동하는 코드를 만들 수 있다는 점을 시사한다.

  - target을 지정하지 않으면 es3로 컴파일된다.

- lib는 타입스크립트의 객체 및 기능 기본 값을 지정할 수 있는 옵션이다.

  - lib 옵션을 설정하지 않으면 몇 가지 기본 값이 적용되며, 이 기본 값들은 일반적으로 브라우저에서 타입스크립트를 실행하기 위해 사용된다.
    - lib 옵션은 "dom", "es6", "dom.iterable", "scripthost"를 설정하면 핵심 자바스크립트 기능을 모두 사용할 수 있다.

- allowJs를 사용하면 자바스크립트 파일을 타입스크립트가 컴파일 할 수 있다.
- "checkJs"는 컴파일하지 않고 구문을 검사하고 잠재적 오류를 보고한다.

  - "checkJs"는 타입스크립트를 사용하고 싶진 않지만, 일부 기능을 활용하고 싶을 때 주로 사용된다.

- .d.ts 파일은 다른 사람에게 라이브러리로 배포할 때 중요한 고급 개념이다.

  - 프로젝트에 포함된 모든 타입을 설명하는 매니페스트(Manifeste) 파일이다.

- sourceMap은 디버깅과 개발에 도움이 된다.

  - 타입스크립트 코드를 디버깅하고 싶을 때, sourceMap을 true로 설정하고 tsc를 실행하면, js.map 파일이 생성된다.  
    이 때 map 파일은 개발자 도구에서 자바스크립트 파일을 입력 파일에 연결하는 다리 역할을 한다.
    sourceMap이 true인 경우, 개발자 도구에서 타입스크립트 파일을 볼 수 있다.

- outDir, rootDir은 큰 프로젝트에서, 파일을 정리하고 싶을 때 유용하다.

  - outDir를 설정하면, 타입스크립트 컴파일러에게 생성된 파일을 어디에 저장해야 할지, 알려줄 수 있으며, 폴더의 경로 또한 복제된다.

    ```json
    "outDir": './folderName'
    ```

  - rootDir를 설정하면, 파일이 저장된 폴더를 구체적으로 설정할 수도 있다.  
    rootDir를 src로 설정하면, 타입스크립트 컴파일러가 다른 폴더에서 찾지 않게 할 수 있다.

- removeComments를 true로 설정하면, 모든 주석이 제거되고 컴파일된 자바스크립트 파일만 남게된다.

- noEmit 출력 파일을 실제로 만들지 않고, 잠재적인 오류를 보고 할 수 있는 설정이다.

- downlevelInteration은 고급 옵션이며, 이전 버전의 자바스크립트 코드를 컴파일하고 for루프를 사용하는 경우,  
  드물게 컴파일이 제대로 안되는 문제가 발생할 수도 있는 경우를 방지할 수 있다.

  - 루프가 있고, 생성된 코드에서 루프가 예상과 다른 방식으로 작동할 때 사용한다.

- noEmitOnError가 false인 경우, 오류와 상관 없이 자바스크립트 파일을 만들 수 있게 되며,  
  true인 경우 문제가 되는 파일은 생성되지 않는다.

- strict 옵션이 true인 경우, 모든 strict 타입 검사 옵션이 활성화 되어, "noImplicitAny"와 같은 모든 옵션을 개별적으로 설정하는 것과 같다.
  따라서, 모든 옵션을 하나씩 설정하거나, strict 옵션 하나만 설정하면 된다.

  - noImplicitAny 옵션을 사용하면 암시적으로 어떤 타입이든 될 수 있는 매개변수에 대해 오류를 표시한다.
  - strictNullChecks 옵션을 사용하면 null 또는 undefined가 허용되지 않는 변수에 대해 오류를 표시한다.
  - strictBindCallApply는 bind 호출 적용 작업을 하는 경우 설정한 내용이 타당한지 검사하는 설정이다.

- noUnusedLocals, noUnusedParameters등 옵션은 타입스크립트에서 사용하지 않는 구문이 있을 경우, 혹은 필요한 구문이 없는 경우를 검사한다.

- noImplicitReturns은 무언가를 반환하는 경우와 하지 않는 경우가 있을 경우 오류를 발생시킨다.

## ! 연산자

- ! 연산자를 사용하면, DOM을 관리하는 변수에 null이 아닌 값이 들어온다고 타입스크립트에게 알려 줄 수 있다.

- 그저 잘 작동하길 바라는 경우, 실패할 수 있는 코드를 if문으로 감싸는 게 좋다.
